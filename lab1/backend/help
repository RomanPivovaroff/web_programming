function addTableRow(x, y, r, hit, date, execTime) {
    const table = document.querySelector(".table-check");

    const row = table.insertRow(-1);
    row.insertCell(0).textContent = x;
    row.insertCell(1).textContent = y;
    row.insertCell(2).textContent = r;
    row.insertCell(3).textContent = hit ? "Попал" : "Не попал";
    row.insertCell(4).textContent = date;
    row.insertCell(5).textContent = execTime + " ns";

    // Сохраняем данные после добавления строки
    saveTableToLocalStorage();
}

// Функция для сохранения всей таблицы
function saveTableToLocalStorage() {
    const table = document.querySelector(".table-check");
    const rows = [];

    // Проходим по всем строкам (начиная с 1, пропускаем заголовок)
    for (let i = 1; i < table.rows.length; i++) {
        const row = table.rows[i];
        const rowData = {
            x: row.cells[0].textContent,
            y: row.cells[1].textContent,
            r: row.cells[2].textContent,
            hit: row.cells[3].textContent === "Попал", // преобразуем обратно в boolean
            date: row.cells[4].textContent,
            execTime: row.cells[5].textContent.replace(" ns", "") // убираем " ns"
        };
        rows.push(rowData);
    }

    // Сохраняем в LocalStorage
    localStorage.setItem('savedTableRows', JSON.stringify(rows));
}

// Функция для загрузки таблицы при загрузке страницы
function loadTableFromLocalStorage() {
    const savedData = localStorage.getItem('savedTableRows');
    if (savedData) {
        const rows = JSON.parse(savedData);

        // Очищаем таблицу (оставляем только заголовок)
        const table = document.querySelector(".table-check");
        while (table.rows.length > 1) {
            table.deleteRow(1);
        }

        // Восстанавливаем все строки
        rows.forEach(rowData => {
            addTableRow(
                rowData.x,
                rowData.y,
                rowData.r,
                rowData.hit,
                rowData.date,
                rowData.execTime
            );
        });
    }
}

// Загружаем данные при загрузке страницы
document.addEventListener('DOMContentLoaded', loadTableFromLocalStorage);